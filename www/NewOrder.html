<!--
  ~ Copyright 2019 Samer Diab emil: contact@samerdiab.net
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Order</title>

</head>
<!-- Material Design Theming -->
<link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
<script type="text/javascript">


    window.onload = function() {



        // console.log(myParam);





    };

</script>
<body>

<div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-header">

    <!-- Header section containing title -->
    <header class="mdl-layout__header mdl-color-text--white mdl-color--light-blue-700">

    </header>

<main class="mdl-layout__content mdl-color--grey-100">

    <div class="mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-grid">

        <!-- Container for the demo -->
        <div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop">
            <div class="mdl-card__supporting-text mdl-color-text--grey-600">


                <input class="mdl-textfield__input" style="display:inline;width:auto;" type="text" id="name" name="name" placeholder="Order Name" />
                <button class="mdl-button mdl-js-button mdl-button--raised" id="create-order" name="create order">Create Order</button>

                <!-- Container where we'll display the user details -->

            </div>
        </div>

    </div>

</main>
</div>

<script src="https://www.gstatic.com/firebasejs/5.7.2/firebase.js"></script>
<script>

    var config = {
        apiKey: "AIzaSyDTiKh6VvOqjV7Vjz7lSjL4TANzfEOAt0Q",
        authDomain: "pristine-rock-91018.firebaseapp.com",
        databaseURL: "https://pristine-rock-91018.firebaseio.com",
        projectId: "pristine-rock-91018",
        storageBucket: "pristine-rock-91018.appspot.com",
        messagingSenderId: "782413632133"
    };

    firebase.initializeApp(config);

</script>
<script>

    const urlParams = new URLSearchParams(window.location.search);
    const order_id = urlParams.get('id');
    var storage = window.localStorage;
    var uid = storage.getItem('uid');




    var del = document.querySelector('#create-order');

    function createOrder(uid,order_name) {

        firebase.database().ref('orders/' +uid).push({
            name:order_name,
            status:false,
            timestamp:new Date().getTime(),
        },function () {
            window.location = 'HomeScreen.html';
        });

    }

    del.addEventListener('click', function() {
        var name = document.getElementById('name').value;
        if (name == "" || name.length == 0 || name == null)
            alert('Order name can not be null');
        else
        if(confirm('New Order?')){
            createOrder(uid,name);

        }
    });

</script>
<script type="text/javascript" src="cordova.js"></script>
<script>
    document.addEventListener("backbutton", function(e){
    e.preventDefault();
        window.history.back();
}, false);
</script>
</body>
</html>